<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Форма ввода</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <style>
      .error {
        border: 2px solid red;
      }
    </style>
  </head>
  <body>
    <form enctype="multipart/form-data">
      <div>
        <input type="text" id="fullname" name="fullname" placeholder="Клиент">
      </div>

      <div>
        <select id="type" name="type">
          <option value="hot_water">Горячая вода</option>
          <option value="cold_water">Холодная вода</option>
        </select>
      </div>
      <div id="error"></div>
      <div class="button-group">
        <button type="submit" id="submit">Отправить</button>
        <button type="reset" id="reset" style="margin-left: 10px">Отмена</button>
      </div>
    </form>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
      let tg = window.Telegram.WebApp;
      tg.expand();

      let submit = document.getElementById("submit");
      let error = document.getElementById("error");

      submit.addEventListener("click", (event) => {
        event.preventDefault();

        let fullname = document.getElementById("fullname");

        let data = {
          fullname: fullname.value,
          type: type_select.value,
        };

        tg.sendData(JSON.stringify(data));
        tg.close();
      });

      let reset = document.getElementById("reset");
      reset.addEventListener("click", () => {
        tg.close();
      });
    </script>
  </body>
</html>
